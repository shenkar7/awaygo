(this.webpackJsonprestaurant=this.webpackJsonprestaurant||[]).push([[0],Array(25).concat([function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(1),s=r.n(n),a=r(19),c=r.n(a),i=(r(25),r(26),r(6)),l=r(2),d=(r(27),r(4)),o=r.n(d),j=r(3),u=(r(46),r(47),r(0)),b=function(e){var t=Object(n.useState)((new Date).getTime()),r=Object(l.a)(t,2),s=r[0],a=r[1],c=e.countDownDate-s,i=Math.floor(Math.abs(c)%864e5/36e5),d=Math.floor(Math.abs(c)%36e5/6e4);d<10&&(d="0"+d);var o=Math.floor(Math.abs(c)%6e4/1e3);o<10&&(o="0"+o),Object(n.useEffect)((function(){setTimeout((function(){a((new Date).getTime())}),1e3)}),[s]);var j=Object(u.jsx)("div",{className:"timer",children:i+":"+d+":"+o});return c<0&&(j=Object(u.jsxs)("div",{className:"timer",style:{color:"red",fontWeight:"bold"},children:["-",i+":"+d+":"+o]})),j},m=(r(49),function(){return Object(u.jsx)("div",{className:"loader"})}),h=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var r=document.cookie.split(";"),n=0;n<r.length;n++){var s=r[n].trim();if(s.substring(0,e.length+1)===e+"="){t=decodeURIComponent(s.substring(e.length+1));break}}return t},O=function(e){var t=Object(n.useState)(null),r=Object(l.a)(t,2),a=r[0],c=r[1],i=null;return"process"===e.order.status&&(i="loading"===a?Object(u.jsx)("span",{className:"spinner",children:Object(u.jsx)(m,{})}):"error"===a?Object(u.jsx)("div",{class:"next-button",children:"\u05e9\u05d2\u05d9\u05d0\u05ea \u05ea\u05e7\u05e9\u05d5\u05e8\u05ea"}):Object(u.jsx)("div",{class:"next-button",children:Object(u.jsx)("button",{onClick:function(){var t=Object(j.a)({},e.order);t.status="ready",t.ready_date_time=new Date(Date.now()),t.customer=t.customer.id,c("loading");var r=window.location.origin,n=h("csrftoken");o.a.put(r+"/order/"+t.id+"/",t,{headers:{"X-CSRFTOKEN":n}}).then((function(r){console.log("SUCCESS updating the order"),t.customer=e.order.customer,e.orderUpdateHandler(t),c(null)})).catch((function(e){c("error"),console.log("ERROR updating the order"),console.log(e.message)}))},children:"\u05de\u05d5\u05db\u05df"})})),Object(u.jsxs)("div",{className:"order-window",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"order-number-countdown",children:[Object(u.jsxs)("b",{children:["#",e.order.id]}),["process","ready"].includes(e.order.status)?Object(u.jsx)(b,{countDownDate:Date.parse(e.order.timing_date_time)}):null]}),Object(u.jsxs)("div",{className:"inside-window",onClick:e.click,children:[Object(u.jsx)("div",{className:"name",children:e.order.customer.first_name+" "+e.order.customer.last_name}),Object(u.jsx)("div",{className:"address",children:e.order.city+" "+e.order.street+" "+e.order.number}),Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"food-section",children:[Object(u.jsx)("i",{className:"fas fa-hamburger"}),Object(u.jsx)("div",{children:e.order.dishesinorder.slice(0,2).map((function(e){return Object(u.jsx)("p",{className:"food",children:e.dish.name+" \xd7"+e.quantity})}))})]}),e.order.remark?Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"remark-section",children:[Object(u.jsx)("i",{className:"fas fa-exclamation-triangle"}),Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"remark",children:e.order.remark})})]})]}):null]})]}),i]})},x=(r(50),function(e){return Object(u.jsxs)("div",{className:"order-small-window",children:[Object(u.jsx)("div",{className:"order-number",children:Object(u.jsxs)("b",{children:["#",e.order.id]})}),Object(u.jsxs)("div",{className:"inside-window",onClick:e.click,children:[Object(u.jsx)("div",{className:"name",children:e.order.customer.first_name+" "+e.order.customer.last_name}),Object(u.jsx)("div",{className:"address",children:e.order.city+" "+e.order.street+" "+e.order.number}),e.order.remark?Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"remark-section",children:[Object(u.jsx)("i",{className:"fas fa-exclamation-triangle"}),Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"remark",children:e.order.remark})})]})]}):null]})]})}),f=(r(51),r.p+"static/media/add.685caefe.png"),v=r.p+"static/media/addHover.cba558ca.png",p=function(e){var t=Object(n.useState)(!1),r=Object(l.a)(t,2),s=r[0],a=r[1];return Object(u.jsxs)("div",{className:"sub-header",children:[Object(u.jsx)("div",{className:"add-order-button",children:s?Object(u.jsx)("img",{src:v,alt:"hoverAdd",onMouseOut:function(){return a(!1)},onClick:e.addOrderHandler}):Object(u.jsx)("img",{src:f,alt:"add",onMouseOver:function(){return a(!0)}})}),Object(u.jsxs)("div",{className:"navigation",children:[Object(u.jsxs)("span",{className:"navigation-button",onClick:e.historyHandler,children:[Object(u.jsx)("i",{class:"fas fa-history"}),"\u05d4\u05d9\u05e1\u05d8\u05d5\u05e8\u05d9\u05ea \u05d4\u05d6\u05de\u05e0\u05d5\u05ea"]}),Object(u.jsx)("span",{className:"separator",children:"|"}),Object(u.jsxs)("span",{className:"navigation-button",onClick:e.menuSiteClosureHandler,children:[Object(u.jsx)("i",{class:"fas fa-store-slash"}),"\u05d4\u05e9\u05d1\u05ea\u05ea \u05d0\u05ea\u05e8 \u05d4\u05ea\u05e4\u05e8\u05d9\u05d8"]}),Object(u.jsx)("span",{className:"separator",children:"|"}),Object(u.jsxs)("span",{className:"navigation-button",onClick:e.dishesVisibilityHandler,children:[Object(u.jsx)("i",{class:"fas fa-eye-slash"}),"\u05d4\u05e1\u05ea\u05e8\u05ea/\u05d4\u05e6\u05d2\u05ea \u05de\u05e0\u05d5\u05ea"]})]})]})},g=(r(52),function(){return Object(u.jsxs)("header",{children:[Object(u.jsx)("div",{className:"logo",children:Object(u.jsx)("a",{href:"/",children:Object(u.jsx)("img",{src:"data:image/jpeg;base64,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",alt:"logo",width:"132",height:"36"})})}),Object(u.jsxs)("div",{className:"logout",children:[Object(u.jsx)("i",{className:"fas fa-user header-icon"}),Object(u.jsx)("a",{href:"/logout",children:"\u05d4\u05ea\u05e0\u05ea\u05e7"})]})]})}),A=(r(53),function(e){return Object(u.jsxs)("div",{className:"modal",children:[Object(u.jsx)("div",{className:"modal-background",onClick:e.modalClick}),Object(u.jsx)("div",{className:"modal-content",children:e.content})]})}),N=r(10),w=r.n(N),C=r(20),k=(r(55),r(56),s.a.createContext([null,null])),y=function(e){var t=Object(n.useContext)(k).customersList,r=function(r,n){var s=Object(j.a)({},e.order);s.customer=Object(j.a)({},e.order.customer);var a=Object(j.a)({},e.validation),c=Object(j.a)({},e.validFields);if("phone_number"===n){s.customer.phone_number=r.target.value,a.phone_number=!0;/^[0-9]+$/.test(r.target.value)?(10!==r.target.value.length||"05"!==r.target.value.substring(0,2))&&(a.phone_number=!1):a.phone_number=!1,function(r,n,s){t.forEach((function(t){t.phone_number===r.customer.phone_number&&(r.customer.first_name=t.first_name,r.customer.last_name=t.last_name,t.email?r.customer.email=t.email:r.customer.email=null,r.city=t.city,r.street=t.street,r.number=t.number,t.apartment?r.apartment=t.apartment:r.apartment=null,n.first_name=!0,n.last_name=!0,n.email=!0,n.city=!0,n.street=!0,n.number=!0,n.apartment=!0,s.phone_number=!0,s.first_name=!0,s.last_name=!0,s.email=!0,s.city=!0,s.street=!0,s.number=!0,s.apartment=!0,e.setInvalid(!1))}))}(s,a,c)}"email"===n&&(s.customer.email=r.target.value,a.email=!0,r.target.value.includes("@")&&r.target.value.includes(".")||null===r.target.value||""===r.target.value||(a.email=!1)),["first_name","last_name"].includes(n)&&(s.customer[n]=r.target.value,a[n]=!0,null!==r.target.value&&""!==r.target.value||(a[n]=!1)),["city","street"].includes(n)&&(s[n]=r.target.value,a[n]=!0,null!==r.target.value&&""!==r.target.value||(a[n]=!1)),"number"===n&&(s.number=r.target.value,a.number=!1,r.target.value>0&&(a.number=!0)),"apartment"===n&&(s.apartment=r.target.value,a.apartment=!0,r.target.value<=0&&null!==r.target.value&&""!==r.target.value&&(a.apartment=!1)),"remark"===n&&(s.remark=r.target.value),e.setOrder(s),e.setValidation(a),e.setValidFields(c)};return Object(u.jsx)("div",{className:"order-details",children:Object(u.jsxs)("form",{children:[Object(u.jsx)("h2",{children:"\u05e4\u05e8\u05d8\u05d9 \u05dc\u05e7\u05d5\u05d7"}),Object(u.jsxs)("div",{className:"customer-details",children:[Object(u.jsxs)("div",{className:"input-couple",children:[Object(u.jsxs)("div",{className:e.validFields.phone_number?"order-input":"order-input invalid",children:[Object(u.jsx)("label",{children:"\u05d8\u05dc\u05e4\u05d5\u05df *"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",placeholder:"\u05d8\u05dc\u05e4\u05d5\u05df",value:e.order.customer.phone_number,onChange:function(e){return r(e,"phone_number")}})]}),Object(u.jsxs)("div",{className:"order-input",children:[Object(u.jsx)("label",{children:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"email",placeholder:"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc",value:e.order.customer.email,onChange:function(e){return r(e,"email")}})]})]}),Object(u.jsxs)("div",{className:"input-couple",children:[Object(u.jsxs)("div",{className:e.validFields.first_name?"order-input":"order-input invalid",children:[Object(u.jsx)("label",{children:"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9 *"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",placeholder:"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9",value:e.order.customer.first_name,onChange:function(e){return r(e,"first_name")}})]}),Object(u.jsxs)("div",{className:e.validFields.last_name?"order-input":"order-input invalid",children:[Object(u.jsx)("label",{children:"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4 *"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",placeholder:"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4",value:e.order.customer.last_name,onChange:function(e){return r(e,"last_name")}})]})]})]}),Object(u.jsx)("h2",{children:"\u05db\u05ea\u05d5\u05d1\u05ea"}),Object(u.jsxs)("div",{className:"address-details",children:[Object(u.jsxs)("div",{className:"input-couple",children:[Object(u.jsxs)("div",{className:e.validFields.city?"order-input":"order-input invalid",children:[Object(u.jsx)("label",{children:"\u05e2\u05d9\u05e8 *"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",placeholder:"\u05e2\u05d9\u05e8",value:e.order.city,onChange:function(e){return r(e,"city")}})]}),Object(u.jsxs)("div",{className:e.validFields.street?"order-input":"order-input invalid",children:[Object(u.jsx)("label",{children:"\u05e8\u05d7\u05d5\u05d1 *"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",placeholder:"\u05e8\u05d7\u05d5\u05d1",value:e.order.street,onChange:function(e){return r(e,"street")}})]})]}),Object(u.jsxs)("div",{className:"input-couple",children:[Object(u.jsxs)("div",{className:e.validFields.number?"order-input":"order-input invalid",children:[Object(u.jsx)("label",{children:"\u05de\u05e1\u05e4\u05e8 \u05d1\u05d9\u05ea *"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"number",placeholder:"\u05de\u05e1\u05e4\u05e8 \u05d1\u05d9\u05ea",min:"1",step:"1",value:e.order.number,onChange:function(e){return r(e,"number")}})]}),Object(u.jsxs)("div",{className:"order-input",children:[Object(u.jsx)("label",{children:"\u05de\u05e1\u05e4\u05e8 \u05d3\u05d9\u05e8\u05d4"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"number",placeholder:"\u05de\u05e1\u05e4\u05e8 \u05d3\u05d9\u05e8\u05d4",min:"1",step:"1",value:e.order.apartment,onChange:function(e){return r(e,"apartment")}})]})]})]}),Object(u.jsx)("h2",{children:"\u05d4\u05e2\u05e8\u05d4"}),Object(u.jsx)("div",{className:"remark",children:Object(u.jsx)("input",{className:"remark-input",type:"text",placeholder:"\u05d4\u05e2\u05e8\u05d4",value:e.order.remark,onChange:function(e){return r(e,"remark")}})})]})})},_=(r(57),r(58),r(59),function(e){return Object(u.jsxs)("div",{className:"counter",children:[Object(u.jsx)("div",{className:"counter-button",onClick:function(){return e.countHandler(1)},children:Object(u.jsx)("i",{className:"fas fa-plus"})}),Object(u.jsx)("div",{children:e.count}),Object(u.jsx)("div",{className:"counter-button",onClick:function(){return e.countHandler(-1)},children:Object(u.jsx)("i",{className:"fas fa-minus"})})]})}),D=function(e){var t=Object(n.useState)(!1),r=Object(l.a)(t,2),a=r[0],c=r[1],i={dish:e.dish,remark:"",quantity:1,extras:[]};e.dish.extraCategories.forEach((function(e){"radio"===e.type&&i.extras.push(e.extras[0])}));var d=Object(n.useState)(i),o=Object(l.a)(d,2),b=o[0],m=o[1],h=function(){c(!a)},O=function(e,t,r){var n=Object(j.a)({},b);"checkbox"===r.type?e.target.checked?n.extras.push(t):n.extras=n.extras.filter((function(e){return e!==t})):"radio"===r.type&&(n.extras=n.extras.filter((function(e){return!r.extras.includes(e)})),n.extras.push(t)),m(n)},x=e.dish.extraCategories.map((function(e){var t;return"checkbox"===e.type?t=e.extras.map((function(t){return Object(u.jsxs)("div",{className:"extra-input",children:[Object(u.jsxs)("label",{htmlFor:t.name,children:[t.name," ",t.price>0?" ("+t.price+"\u20aa)":null]}),Object(u.jsx)("input",{type:"checkbox",id:t.name,checked:b.extras.includes(t),onChange:function(r){return O(r,t,e)}})]},t.name)})):"radio"===e.type&&(t=e.extras.map((function(t){return Object(u.jsxs)("div",{className:"extra-input",children:[Object(u.jsxs)("label",{htmlFor:t.name,children:[t.name," ",t.price>0?" ("+t.price+"\u20aa)":null]}),Object(u.jsx)("input",{type:"radio",id:t.name,checked:b.extras.includes(t),onChange:function(r){return O(r,t,e)}})]},t.name)}))),Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{children:e.name}),Object(u.jsx)("div",{className:"category-inputs",children:t})]},e.name)}));return a?Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsxs)("div",{className:"dish-name",onClick:h,children:[Object(u.jsx)("span",{children:e.dish.name}),Object(u.jsxs)("span",{children:[e.dish.price,"\u20aa"]})]}),Object(u.jsxs)("div",{className:"dish-extras",children:[Object(u.jsxs)("div",{className:"description-and-counter",children:[e.dish.description,Object(u.jsx)(_,{count:b.quantity,countHandler:function(e){if(b.quantity+e>0){var t=Object(j.a)({},b);t.quantity=b.quantity+e,m(t)}}})]}),Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.setOrder((function(e){var t=Object(j.a)({},e);return t.dishes_in_order.push(b),t})),c(!1)},children:[x,Object(u.jsx)("h4",{children:"\u05d4\u05e2\u05e8\u05d4 \u05dc\u05de\u05e0\u05d4"}),Object(u.jsx)("div",{className:"dish-description",children:Object(u.jsx)("input",{type:"text",onChange:function(e){return function(e){var t=Object(j.a)({},b);t.remark=e,m(t)}(e.target.value)}})}),Object(u.jsx)("br",{}),Object(u.jsx)("div",{className:"add-dish-button",children:Object(u.jsx)("button",{type:"submit",children:"\u05d4\u05d5\u05e1\u05e3 \u05dc\u05d4\u05d6\u05de\u05e0\u05d4"})})]}),Object(u.jsx)("hr",{})]})]}):Object(u.jsxs)("div",{className:"dish-name",onClick:h,children:[Object(u.jsx)("span",{children:e.dish.name}),Object(u.jsxs)("span",{children:[e.dish.price,"\u20aa"]})]})},S=function(e){var t=Object(n.useContext)(k).foodCategories.map((function(t){var r=t.dishes.map((function(t){return t.visible?Object(u.jsx)("div",{children:Object(u.jsx)(D,{dish:t,setOrder:e.setOrder})},t.name):null}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:t.name}),r]},t.name)}));return Object(u.jsxs)("div",{className:"menu",children:[Object(u.jsx)("h2",{children:"\u05ea\u05e4\u05e8\u05d9\u05d8"}),t]})},E=(r(60),r(61),function(e){for(var t=parseFloat(e.dishInCart.dish.price),r="",n=0;n<e.dishInCart.extras.length;n++)t+=parseFloat(e.dishInCart.extras[n].price),n<e.dishInCart.extras.length-1?r+=e.dishInCart.extras[n].name+", ":r+=e.dishInCart.extras[n].name;return Object(u.jsxs)("div",{className:"dish-in-cart",children:[Object(u.jsxs)("div",{className:"name-and-price",children:[Object(u.jsx)("h4",{children:e.dishInCart.quantity+" \xd7 "+e.dishInCart.dish.name}),Object(u.jsxs)("p",{children:["\u20aa",t*parseFloat(e.dishInCart.quantity)]})]}),r,Object(u.jsx)("div",{className:"delete",children:Object(u.jsx)("i",{className:"fas fa-trash-alt",onClick:function(){var t=Object(j.a)({},e.order);t.dishes_in_order=t.dishes_in_order.filter((function(t){return t!==e.dishInCart})),e.setOrder(t)}})}),Object(u.jsx)("hr",{})]})}),F=function(e){var t=Object(n.useContext)(k).delivery_cost,r=t,s=e.order.dishes_in_order.map((function(t){return function(e){var t=parseFloat(e.dish.price);e.extras.forEach((function(e){t+=parseFloat(e.price)})),r+=t*e.quantity}(t),Object(u.jsx)(E,{dishInCart:t,order:e.order,setOrder:e.setOrder},Math.random())}));return Object(u.jsxs)("aside",{className:"cart-window",children:[Object(u.jsx)("h3",{children:"\u05e2\u05d2\u05dc\u05ea \u05d4\u05d6\u05de\u05e0\u05d4"}),Object(u.jsx)("div",{className:"dishes-in-order",children:s}),r>t?Object(u.jsx)("div",{className:"total-price",children:Object(u.jsx)("h4",{children:'\u05e1\u05d4"\u05db + \u05de\u05e9\u05dc\u05d5\u05d7 \u20aa'+r})}):Object(u.jsx)("p",{children:"\u05d4\u05e2\u05d2\u05dc\u05d4 \u05e8\u05d9\u05e7\u05d4"})]})},H=(r(62),function(e){var t=Object(n.useState)(15),r=Object(l.a)(t,2),s=r[0],a=r[1],c=Object(n.useState)(15),i=Object(l.a)(c,2),d=i[0],o=i[1],j=function(e){10===e?(a(10),o(10)):15===e||e<=0?(a(15),o(15)):20===e?(o(20),a(20)):(a(e),o(e))};return Object(u.jsxs)("div",{className:"timing-orders",children:[Object(u.jsxs)("div",{className:"timing-choices",children:[10===s?Object(u.jsxs)("div",{className:"choice selected",children:[Object(u.jsx)("span",{children:"\u05d3\u05e7\u05d5\u05ea"})," ",Object(u.jsx)("span",{children:"10"})]}):Object(u.jsxs)("div",{className:"choice",onClick:function(){return j(10)},children:[Object(u.jsx)("span",{children:"\u05d3\u05e7\u05d5\u05ea"})," ",Object(u.jsx)("span",{children:"10"})]}),15===s?Object(u.jsxs)("div",{className:"choice selected",children:[Object(u.jsx)("span",{children:"\u05d3\u05e7\u05d5\u05ea"})," ",Object(u.jsx)("span",{children:"15"})]}):Object(u.jsxs)("div",{className:"choice",onClick:function(){return j(15)},children:[Object(u.jsx)("span",{children:"\u05d3\u05e7\u05d5\u05ea"})," ",Object(u.jsx)("span",{children:"15"})]}),20===s?Object(u.jsxs)("div",{className:"choice selected",children:[Object(u.jsx)("span",{children:"\u05d3\u05e7\u05d5\u05ea"})," ",Object(u.jsx)("span",{children:"20"})]}):Object(u.jsxs)("div",{className:"choice",onClick:function(){return j(20)},children:[Object(u.jsx)("span",{children:"\u05d3\u05e7\u05d5\u05ea"})," ",Object(u.jsx)("span",{children:"20"})]}),Object(u.jsxs)("div",{className:"number-choice",children:[Object(u.jsx)("input",{type:"number",value:d,onChange:function(e){return j(e.target.value)}}),":\u05d0\u05d7\u05e8"]})]}),Object(u.jsx)("div",{className:"time-order",onClick:function(){return e.timingButtonHandler(s)},children:e.invalid?Object(u.jsx)("h1",{children:e.invalid}):Object(u.jsx)("h1",{children:"\u05ea\u05d6\u05de\u05df \u05d4\u05d6\u05de\u05e0\u05d4"})})]})}),M=function(e){var t=Object(n.useState)(null),r=Object(l.a)(t,2),s=r[0],a=r[1],c=Object(n.useState)({restaurant:e.restaurant.id,city:"",street:"",number:"",apartment:"",customer:{phone_number:"",first_name:"",last_name:"",email:""},remark:"",dishes_in_order:[]}),d=Object(l.a)(c,2),b=d[0],O=d[1],x=Object(n.useState)({phone_number:!1,email:!0,first_name:!1,last_name:!1,city:!1,street:!1,number:!1,apartment:!0,nonEmptyCart:!1}),f=Object(l.a)(x,2),v=f[0],p=f[1],g=Object(n.useState)({phone_number:!0,email:!0,first_name:!0,last_name:!0,city:!0,street:!0,number:!0,apartment:!0,nonEmptyCart:!0}),A=Object(l.a)(g,2),N=A[0],k=A[1],_=Object(n.useState)(!1),D=Object(l.a)(_,2),E=D[0],M=D[1],I=function(){return new Promise((function(t,r){for(var n in v)if(!v[n])return console.log("INVALID incorrect field"),M("nonEmptyCart"===n?"\u05ea\u05d6\u05de\u05df \u05d4\u05d6\u05de\u05e0\u05d4 (\u05e2\u05d2\u05dc\u05d4 \u05e8\u05d9\u05e7\u05d4) *":"\u05ea\u05d6\u05de\u05df \u05d4\u05d6\u05de\u05e0\u05d4 (\u05e0\u05ea\u05d5\u05e0\u05d9\u05dd \u05d7\u05e1\u05e8\u05d9\u05dd) *"),void r();a("loading"),o.a.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{key:"AIzaSyCNqxz5Bw1VveJ53Bch3wXl8CdYFrP5Pac",address:b.city+" "+b.street+" "+b.number}}).then((function(n){if(console.log("SUCCESS getting google maps api"),a(null),"OK"!==n.data.status)return console.log("INVALID incorrect address"),M("\u05ea\u05d6\u05de\u05df \u05d4\u05d6\u05de\u05e0\u05d4 (\u05db\u05ea\u05d5\u05d1\u05ea \u05dc\u05d0 \u05ea\u05e7\u05d9\u05e0\u05d4) *"),void r();if("partial_match"in n.data.results[0])return console.log("INVALID partial_match address"),M("\u05ea\u05d6\u05de\u05df \u05d4\u05d6\u05de\u05e0\u05d4 (\u05db\u05ea\u05d5\u05d1\u05ea \u05dc\u05d0 \u05ea\u05e7\u05d9\u05e0\u05d4) *"),void r();var s=n.data.results[0].geometry.location.lat,c=n.data.results[0].geometry.location.lng,i=function(e,t,r,n){var s=function(e){return e*(Math.PI/180)},a=s(r-e),c=s(n-t),i=Math.sin(a/2)*Math.sin(a/2)+Math.cos(s(e))*Math.cos(s(r))*Math.sin(c/2)*Math.sin(c/2);return(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371).toFixed(3)}(e.restaurant.lat,e.restaurant.lng,s,c);if(i>60)return console.log("INVALID too far address"),M("\u05ea\u05d6\u05de\u05df \u05d4\u05d6\u05de\u05e0\u05d4 (\u05db\u05ea\u05d5\u05d1\u05ea \u05e8\u05d7\u05d5\u05e7\u05d4 \u05de\u05d3\u05d9) *"),void r();console.log("VALID address by google"),t({customerLat:s,customerLng:c,deliveryDistance:i})})).catch((function(e){console.log("ERROR getting google maps api"),console.log(e.message),a("error"),r()}))}))},R=function(e){for(var t=Object(j.a)(Object(j.a)({},e),{},{dishes_in_order:Object(i.a)(e.dishes_in_order)}),r=0;r<e.dishes_in_order.length;r++){t.dishes_in_order[r]=Object(j.a)(Object(j.a)({},e.dishes_in_order[r]),{},{dish:e.dishes_in_order[r].dish.id,extras:Object(i.a)(e.dishes_in_order[r].extras)});for(var n=0;n<e.dishes_in_order[r].extras.length;n++)t.dishes_in_order[r].extras[n]=e.dishes_in_order[r].extras[n].id}return t},B=function(){var t=Object(C.a)(w.a.mark((function t(r){var n,s,c,i,l,d;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Object(j.a)({},b),t.prev=1,t.next=4,I();case 4:c=t.sent,s.address_lat=c.customerLat,s.address_lng=c.customerLng,s.delivery_distance=c.deliveryDistance,n=!0,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n=!1;case 14:n?(a("loading"),(i=R(s)).status="process",i.process_date_time=new Date(Date.now()),i.timing_date_time=new Date(Date.now()+60*r*1e3),l=window.location.origin,d=h("csrftoken"),o.a.post(l+"/order_add",i,{headers:{"X-CSRFTOKEN":d}}).then((function(t){console.log("SUCCESS adding order"),e.successClose(),window.location.reload()})).catch((function(e){console.log("ERROR posting order"),console.log(e.message),a("error")}))):k(v);case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}();if(0===b.dishes_in_order.length&&v.nonEmptyCart){var K=v;K.nonEmptyCart=!1,p(K)}else if(b.dishes_in_order.length>0&&!v.nonEmptyCart){var P=v;P.nonEmptyCart=!0,p(P),M(!1)}return"loading"===s?Object(u.jsx)("div",{className:"spinner-or-error",children:Object(u.jsx)(m,{})}):"error"===s?Object(u.jsxs)("div",{className:"spinner-or-error",children:[Object(u.jsx)("i",{className:"fas fa-exclamation-triangle"}),Object(u.jsx)("br",{}),"\u05e9\u05d2\u05d9\u05d0\u05ea \u05ea\u05e7\u05e9\u05d5\u05e8\u05ea \u05d1\u05d9\u05e6\u05d9\u05e8\u05ea \u05d4\u05d4\u05d6\u05de\u05e0\u05d4"]}):Object(u.jsxs)("div",{className:"add-order-window",children:[Object(u.jsxs)("div",{class:"cart-and-details",children:[Object(u.jsxs)("div",{className:"customer-and-menu",children:[Object(u.jsx)(y,{order:b,setOrder:O,validation:v,setValidation:p,validFields:N,setValidFields:k,setInvalid:M}),Object(u.jsx)(S,{setOrder:O})]}),Object(u.jsx)(F,{order:b,setOrder:O})]}),Object(u.jsx)(H,{timingButtonHandler:B,invalid:E})]})},I=(r(63),function(e){if(null===e)return null;if("string"===typeof e)return e.substring(11,16);var t=e.getHours().toString();1===t.length&&(t="0"+t);var r=e.getMinutes().toString();return 1===r.length&&(r="0"+r),t+":"+r}),R=function(e){var t,r,a,c=Object(n.useState)(null),i=Object(l.a)(c,2),d=i[0],b=i[1],O=function(t){var r=Object(j.a)({},e.order);if(r.customer=r.customer.id,"cancel"===t)r.status="canceled",r.canceled_date_time=new Date(Date.now());else if("back"===t)switch(r.status){case"ready":r.status="process",r.ready_date_time=null,r.process_date_time=new Date(Date.now());break;case"sent":r.status="ready",r.sent_date_time=null,r.ready_date_time=new Date(Date.now());break;case"delivered":r.status="sent",r.delivered_date_time=null,r.sent_date_time=new Date(Date.now())}b("loading");var n=window.location.origin,s=h("csrftoken");o.a.put(n+"/order/"+r.id+"/",r,{headers:{"X-CSRFTOKEN":s}}).then((function(t){console.log("SUCCESS updating the order"),r.customer=e.order.customer,e.orderUpdateHandler(r),e.modalClose(!1)})).catch((function(e){b("error"),console.log("ERROR updating the order"),console.log(e.message)}))},x=null;"loading"===d?x=Object(u.jsx)("span",{className:"spinner",children:Object(u.jsx)(m,{})}):"error"===d?x=Object(u.jsx)("div",{class:"buttons",children:"\u05e9\u05d2\u05d9\u05d0\u05ea \u05ea\u05e7\u05e9\u05d5\u05e8\u05ea"}):["ready","sent"].includes(e.order.status)?x=Object(u.jsxs)("div",{class:"buttons",children:[Object(u.jsx)("button",{className:"back-button",onClick:function(){return O("back")},children:"\u05d4\u05d7\u05d6\u05e8 \u05dc\u05de\u05e6\u05d1 \u05d4\u05e7\u05d5\u05d3\u05dd"}),Object(u.jsx)("button",{className:"cancel-button",onClick:function(){return O("cancel")},children:"\u05d1\u05d8\u05dc \u05d4\u05d6\u05de\u05e0\u05d4"})]}):"canceled"!==e.order.status&&"delivered"!==e.order.status&&(x=Object(u.jsx)("div",{class:"buttons",children:Object(u.jsx)("button",{className:"cancel-button",onClick:function(){return O("cancel")},children:"\u05d1\u05d8\u05dc \u05d4\u05d6\u05de\u05e0\u05d4"})})),t=r=a="",e.order.street&&(t=" "+e.order.street),e.order.number&&(r=" "+String(e.order.number)),e.order.apartment&&(a=" \u05d3\u05d9\u05e8\u05d4 "+String(e.order.apartment));var f,v=I(e.order.creation_date_time),p=null===(f=e.order.creation_date_time)?null:f.substring(8,10)+"/"+f.substring(5,7)+"/"+f.substring(0,4),g=I(e.order.process_date_time),A=I(e.order.timing_date_time),N=I(e.order.ready_date_time),w=I(e.order.sent_date_time),C=I(e.order.delivered_date_time),k=I(e.order.canceled_date_time),y=null;return y=k?Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsx)("div",{children:v+" :\u05e0\u05d5\u05e6\u05e8 \u05d1"}),Object(u.jsx)("div",{children:k+" :\u05d1\u05d5\u05d8\u05dc \u05d1"})]}):Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsx)("div",{children:v+" :\u05e0\u05d5\u05e6\u05e8 \u05d1"}),Object(u.jsx)("div",{children:g?g+" :\u05d1\u05d8\u05d9\u05e4\u05d5\u05dc \u05de":null}),Object(u.jsx)("div",{children:A?A+" :\u05ea\u05d5\u05d6\u05de\u05df \u05dc":null}),Object(u.jsx)("div",{children:N?N+" :\u05de\u05d5\u05db\u05df \u05de":null}),Object(u.jsx)("div",{children:w?w+" :\u05d9\u05e6\u05d0 \u05d1":null}),Object(u.jsx)("div",{children:C?C+" :\u05d4\u05d2\u05d9\u05e2 \u05d1":null})]}),Object(u.jsxs)("div",{className:"view-order-window",children:[Object(u.jsx)("div",{className:"order-number",children:Object(u.jsxs)("b",{children:["#",e.order.id]})}),Object(u.jsxs)("div",{className:"inside-window",children:[Object(u.jsxs)("div",{className:"date-name-address",children:[Object(u.jsx)("div",{className:"creation-date",children:p}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"name",children:e.order.customer.first_name+" "+e.order.customer.last_name}),Object(u.jsx)("div",{className:"address",children:e.order.city+t+r+a})]})]}),Object(u.jsx)("hr",{}),Object(u.jsx)("div",{className:"dates-section",children:y}),Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"food-section",children:[Object(u.jsx)("i",{className:"fas fa-hamburger"}),Object(u.jsx)("div",{children:e.order.dishesinorder.map((function(e){for(var t=[],r=0;r<e.extras.length;r++)r<e.extras.length-1?t.push(e.extras[r].name+", "):t.push(e.extras[r].name);var n=null;return e.remark&&(n=Object(u.jsxs)("p",{className:"food",children:[e.remark," ",Object(u.jsx)("i",{className:"fas fa-exclamation-triangle"})]})),Object(u.jsxs)("div",{children:[e.dish.name+" \xd7 "+e.quantity,Object(u.jsx)("p",{className:"food",children:t}),n]},Math.random())}))})]}),e.order.remark?Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"remark-section",children:[Object(u.jsx)("i",{className:"fas fa-exclamation-triangle"}),Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"remark",children:e.order.remark})})]})]}):null]}),x]})},B=(r(64),function(e){var t,r,a,c=Object(n.useState)(null),i=Object(l.a)(c,2),d=i[0],b=i[1],O=function(t){var r=Object(j.a)({},e.order);r.customer=r.customer.id,t?(r.process_date_time=new Date(Date.now()),r.timing_date_time=new Date(Date.now()+60*t*1e3),r.status="process"):(r.status="canceled",r.canceled_date_time=new Date(Date.now())),b("loading");var n=window.location.origin,s=h("csrftoken");o.a.put(n+"/order/"+r.id+"/",r,{headers:{"X-CSRFTOKEN":s}}).then((function(t){console.log("SUCCESS updating order"),r.customer=e.order.customer,b(null),e.orderUpdateHandler(r),e.modalClose(!1)})).catch((function(e){b("error"),console.log("ERROR updating order"),console.log(e.message)}))},x=null,f=null;"error"===d?x=Object(u.jsx)("div",{className:"new-order-window error",children:"\u05e9\u05d2\u05d9\u05d0\u05ea \u05ea\u05e7\u05e9\u05d5\u05e8\u05ea"}):(f="loading"===d?Object(u.jsx)("span",{className:"spinner",children:Object(u.jsx)(m,{})}):Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsx)(H,{timingButtonHandler:O}),Object(u.jsx)("div",{className:"cancel-button-section",children:Object(u.jsx)("div",{onClick:function(){return O(null)},children:"\u05d1\u05d8\u05dc \u05d4\u05d6\u05de\u05e0\u05d4"})})]}),t=r=a="",e.order.street&&(t=" "+e.order.street),e.order.number&&(r=" "+String(e.order.number)),e.order.apartment&&(a=" \u05d3\u05d9\u05e8\u05d4 "+String(e.order.apartment)),x=Object(u.jsxs)("div",{className:"new-order-window",children:[Object(u.jsx)("div",{className:"order-number",children:Object(u.jsxs)("b",{children:["#",e.order.id]})}),Object(u.jsxs)("div",{className:"inside-window",children:[Object(u.jsx)("div",{className:"name",children:e.order.customer.first_name+" "+e.order.customer.last_name}),Object(u.jsx)("div",{className:"address",children:e.order.city+t+r+a}),Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"food-section",children:[Object(u.jsx)("i",{className:"fas fa-hamburger"}),Object(u.jsx)("div",{children:e.order.dishesinorder.map((function(e){for(var t=[],r=0;r<e.extras.length;r++)r<e.extras.length-1?t.push(e.extras[r].name+", "):t.push(e.extras[r].name);var n=null;return e.remark&&(n=Object(u.jsxs)("p",{className:"food",children:[e.remark," ",Object(u.jsx)("i",{className:"fas fa-exclamation-triangle"})]})),Object(u.jsxs)("div",{children:[e.dish.name+" \xd7 "+e.quantity,Object(u.jsx)("p",{className:"food",children:t}),n]},Math.random())}))})]}),e.order.remark?Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"remark-section",children:[Object(u.jsx)("i",{className:"fas fa-exclamation-triangle"}),Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"remark",children:e.order.remark})})]})]}):null]}),f]}));return x}),K=(r(65),r(66),function(e){return Object(u.jsxs)("label",{className:"switch",children:[Object(u.jsx)("input",{type:"checkbox",checked:e.checked,onChange:e.toggleHandler}),Object(u.jsx)("span",{className:"slider"})]})}),P=function(e){var t,r=Object(n.useState)(null),a=Object(l.a)(r,2),c=a[0],i=a[1];return t="loading"===c?Object(u.jsx)("div",{className:"loading-and-error",children:Object(u.jsx)(m,{})}):"error"===c?Object(u.jsx)("div",{className:"loading-and-error",children:"\u05e9\u05d2\u05d9\u05d0\u05ea \u05ea\u05e7\u05e9\u05d5\u05e8\u05ea"}):Object(u.jsxs)(s.a.Fragment,{children:[e.restaurant.menu_open?Object(u.jsx)("p",{children:"\u05d4\u05d0\u05ea\u05e8 \u05e4\u05ea\u05d5\u05d7 \u05dc\u05d4\u05d6\u05de\u05e0\u05d5\u05ea"}):Object(u.jsx)("p",{children:"\u05d4\u05d0\u05ea\u05e8 \u05e1\u05d2\u05d5\u05e8 \u05dc\u05d4\u05d6\u05de\u05e0\u05d5\u05ea"}),Object(u.jsx)(K,{checked:e.restaurant.menu_open,toggleHandler:function(t){var r=Object(j.a)({},e.restaurant);if(r.menu_open=t.target.checked,delete r.background_img,t.target.checked!==e.restaurant.menu_open){i("loading");var n=window.location.origin,s=h("csrftoken");o.a.put(n+"/my_restaurant",r,{headers:{"X-CSRFTOKEN":s}}).then((function(t){console.log("SUCCESS updating restaurant"),e.setRestaurant(r),i(null)})).catch((function(e){console.log("ERROR updating restaurant"),console.log(e.message),i("error")}))}}})]}),Object(u.jsxs)("div",{className:"menu-site-closure",children:[Object(u.jsx)("h2",{children:"\u05e4\u05ea\u05d9\u05d7\u05ea/\u05d4\u05e9\u05d1\u05ea\u05ea \u05d0\u05ea\u05e8 \u05d4\u05ea\u05e4\u05e8\u05d9\u05d8 \u05dc\u05dc\u05e7\u05d5\u05d7\u05d5\u05ea"}),t]})},L=(r(67),function(e){var t=Object(n.useState)(null),r=Object(l.a)(t,2),a=r[0],c=r[1],d=function(e){for(var t=Object(i.a)(e),r=0;r<e.length;r++){t[r]=Object(j.a)({},e[r]),t[r].dishes=Object(i.a)(e[r].dishes);for(var n=0;n<e[r].dishes.length;n++)t[r].dishes[n]=Object(j.a)({},e[r].dishes[n])}return t},b=Object(n.useState)(d(e.foodCategories)),O=Object(l.a)(b,2),x=O[0],f=O[1],v=null;if("loading"===a)v=Object(u.jsx)("div",{className:"spinner-and-error",children:Object(u.jsx)(m,{})});else if("error"===a)v=Object(u.jsx)("div",{className:"spinner-and-error",children:"\u05e9\u05d2\u05d9\u05d0\u05ea \u05ea\u05e7\u05e9\u05d5\u05e8\u05ea"});else{var p=x.map((function(e){var t=e.dishes.map((function(e){return Object(u.jsxs)("div",{className:"dish-input",children:[Object(u.jsx)("input",{type:"checkbox",id:e.name,checked:e.visible,onChange:function(t){return function(e,t){var r=d(x);r.forEach((function(r){r.dishes.forEach((function(r){r.id===t&&(r.visible=e.target.checked)}))})),f(r)}(t,e.id)}}),Object(u.jsx)("label",{htmlFor:e.name,children:e.name})]},e.name)}));return Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsx)("h3",{children:e.name}),t]},e.name)}));v=Object(u.jsxs)(s.a.Fragment,{children:[p,Object(u.jsx)("div",{className:"update-button",onClick:function(){c("loading");var t=window.location.origin,r=h("csrftoken");o.a.put(t+"/dishes_visibility",x,{headers:{"X-CSRFTOKEN":r}}).then((function(t){console.log("SUCCESS updating dishes visibility"),e.setFoodCategories(x),c(null),e.modalClose(!1)})).catch((function(e){c("error"),console.log("Error updating dishes visibility"),console.log(e.message)}))},children:"\u05e2\u05d3\u05db\u05df"})]})}return Object(u.jsxs)("div",{className:"dishes-visibility",children:[Object(u.jsx)("h2",{children:"\u05e1\u05d9\u05de\u05d5\u05df \u05de\u05e0\u05d5\u05ea \u05e9\u05d9\u05d5\u05e4\u05d9\u05e2\u05d5 \u05d1\u05ea\u05e4\u05e8\u05d9\u05d8"}),v]})}),U=function(e){var t=Object(n.useState)(null),r=Object(l.a)(t,2),a=r[0],c=r[1],d=Object(n.useState)(null),j=Object(l.a)(d,2),b=j[0],h=j[1],f=Object(n.useState)(null),v=Object(l.a)(f,2),N=v[0],w=v[1],C=Object(n.useState)(null),y=Object(l.a)(C,2),_=y[0],D=y[1],S=Object(n.useState)("orders"),E=Object(l.a)(S,2),F=E[0],H=E[1],I=Object(n.useState)(!0),K=Object(l.a)(I,2),U=K[0],X=K[1],Q=Object(n.useState)(!1),q=Object(l.a)(Q,2),J=q[0],G=q[1],V=Object(n.useState)(!1),z=Object(l.a)(V,2),T=z[0],W=z[1],Z=Object(n.useState)(!1),Y=Object(l.a)(Z,2),$=Y[0],ee=Y[1],te=Object(n.useState)(!1),re=Object(l.a)(te,2),ne=re[0],se=re[1],ae=Object(n.useState)(!1),ce=Object(l.a)(ae,2),ie=ce[0],le=ce[1],de=Object(n.useState)(!1),oe=Object(l.a)(de,2),je=oe[0],ue=oe[1],be=Object(n.useState)(!1),me=Object(l.a)(be,2),he=me[0],Oe=me[1];!T||$||ne||ie||je||he||window.location.reload();var xe=null;a&&(xe=a.filter((function(e){return"new"===e.status}))).length>0&&!ie&&le(xe[0]);var fe=window.location.origin;Object(n.useEffect)((function(){var e=o.a.get(fe+"/customers"),t=o.a.get(fe+"/orders"),r=o.a.get(fe+"/my_restaurant");o.a.all([e,t,r]).then((function(e){console.log("SUCCESS getting customers, orders and restaurant"),h(e[0].data),c(e[1].data),w(e[2].data),o.a.get(fe+"/foodcategories/"+e[2].data.id+"/").then((function(e){console.log("SUCCESS getting foodcategories"),D(e.data),X(!1)})).catch((function(e){console.log("ERROR getting foodcategories"),console.log(e.message),G(e)}))})).catch((function(e){console.log("ERROR getting customers, orders and my_restaurant"),console.log(e),G(e)}))}),[]),Object(n.useEffect)((function(){if(!U&&!J)var e=setInterval((function(){o.a.get(fe+"/orders").then((function(t){console.log("SUCCESS getting orders"),function(e){return e.length!==a.length}(t.data)&&(clearInterval(e),W(!0))})).catch((function(e){console.log("Error getting orders"),console.log(e.message)}))}),3e4)}),[U,J]);var ve,pe=function(e){for(var t=Object(i.a)(a),r=0;r<t.length;r++)t[r].id===e.id&&(t[r]=e);c(t)},ge=Object(u.jsxs)("div",{className:"error-message",children:[Object(u.jsx)("p",{children:Object(u.jsx)("i",{className:"fas fa-exclamation-triangle"})}),Object(u.jsx)("p",{children:"\u05e9\u05d2\u05d9\u05d0\u05ea \u05ea\u05e7\u05e9\u05d5\u05e8\u05ea"})]}),Ae=null;if(U)Ae=Object(u.jsx)("div",{className:"spinner",children:Object(u.jsx)(m,{})});else if(J)Ae=ge;else{var Ne=function(e){return Object(u.jsx)(O,{order:e,orderUpdateHandler:pe,click:function(){return se(e)}},e.id)},we=a.filter((function(e){return"process"===e.status})).map(Ne),Ce=a.filter((function(e){return"ready"===e.status})).map(Ne),ke=a.filter((function(e){return"sent"===e.status})).map((function(e){return Object(u.jsx)(x,{order:e,click:function(){return se(e)}},e.id)})),ye=a.filter((function(e){return"delivered"===e.status})).map((function(e){return Object(u.jsx)(x,{order:e,click:function(){return se(e)}},e.id)})),_e=a.filter((function(e){return"canceled"===e.status})).map((function(e){return Object(u.jsx)(x,{order:e,click:function(){return se(e)}},e.id)})),De=Object(u.jsx)(M,{customersList:b,restaurant:N,successClose:function(){return ee(!1)}}),Se=Object(u.jsx)(R,{order:ne,orderUpdateHandler:pe,modalClose:se}),Ee=Object(u.jsx)(B,{order:ie,orderUpdateHandler:pe,modalClose:le}),Fe=Object(u.jsx)(P,{restaurant:N,setRestaurant:w}),He=Object(u.jsx)(L,{foodCategories:_,setFoodCategories:D,modalClose:Oe}),Me=null;switch(F){case"orders":Me=Object(u.jsxs)("div",{className:"all-orders-window",children:[Object(u.jsxs)("div",{className:"columns-titles",children:[Object(u.jsx)("h3",{children:"\u05e0\u05d0\u05e1\u05e3"}),Object(u.jsx)("div",{className:"title-seperator"}),Object(u.jsx)("h3",{children:"\u05de\u05d5\u05db\u05df \u05dc\u05d0\u05d9\u05e1\u05d5\u05e3"}),Object(u.jsx)("div",{className:"title-seperator"}),Object(u.jsx)("h3",{children:"\u05d1\u05d8\u05d9\u05e4\u05d5\u05dc"})]}),Object(u.jsxs)("div",{className:"orders-columns",children:[Object(u.jsx)("div",{className:"orders-column",children:we}),Object(u.jsx)("div",{className:"column-seperation"}),Object(u.jsx)("div",{className:"orders-column",children:Ce}),Object(u.jsx)("div",{className:"column-seperation"}),Object(u.jsx)("div",{className:"orders-column",children:ke})]})]});break;case"history":Me=Object(u.jsxs)("div",{children:[Object(u.jsxs)("span",{className:"link",onClick:function(){return H("orders")},children:["\u05d7\u05d6\u05e8\u05d4 \u05dc\u05d4\u05d6\u05de\u05e0\u05d5\u05ea"," ",Object(u.jsx)("i",{class:"fas fa-chevron-circle-right"})]}),Object(u.jsxs)("div",{className:"all-orders-window",children:[Object(u.jsxs)("div",{className:"columns-titles",children:[Object(u.jsx)("h3",{children:"\u05d4\u05d6\u05de\u05e0\u05d5\u05ea \u05e9\u05d1\u05d5\u05d8\u05dc\u05d5"}),Object(u.jsx)("div",{className:"title-seperator"}),Object(u.jsx)("h3",{children:"\u05d4\u05d6\u05de\u05e0\u05d5\u05ea \u05e9\u05d4\u05ea\u05d1\u05e6\u05e2\u05d5"})]}),Object(u.jsxs)("div",{className:"orders-columns",children:[Object(u.jsx)("div",{className:"orders-column",children:ye}),Object(u.jsx)("div",{className:"column-seperation"}),Object(u.jsx)("div",{className:"orders-column",children:_e})]})]})]});break;default:console.log("Unable to show a page")}Ae=Object(u.jsxs)(s.a.Fragment,{children:[ne?Object(u.jsx)(A,{content:Se,modalClick:function(){return se(!1)}}):null,$?Object(u.jsx)(A,{content:De,modalClick:function(){return ee(!1)}}):null,ie?Object(u.jsx)(A,{content:Ee}):null,$?Object(u.jsx)(A,{content:De,modalClick:function(){return ee(!1)}}):null,je?Object(u.jsx)(A,{content:Fe,modalClick:function(){return ue(!1)}}):null,he?Object(u.jsx)(A,{content:He,modalClick:function(){return Oe(!1)}}):null,Object(u.jsx)(g,{}),Object(u.jsxs)("main",{children:[Object(u.jsx)(p,{addOrderHandler:function(){return ee(!0)},historyHandler:function(){return H("history")},menuSiteClosureHandler:function(){return ue(!0)},dishesVisibilityHandler:function(){return Oe(!0)}}),Me]})]})}return N&&(ve=parseFloat(N.delivery_cost)),Object(u.jsx)(k.Provider,{value:{customersList:b,foodCategories:_,delivery_cost:ve},children:Ae})};var X=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(U,{})})},Q=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,69)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;r(e),n(e),s(e),a(e),c(e)}))};c.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(X,{})}),document.getElementById("root")),Q()}]),[[68,1,2]]]);
//# sourceMappingURL=main.99e58889.chunk.js.map